import{j as e,m as p}from"./vendor-react-dE8-2NoN.js";import{u as g}from"./index-C0_HeUlG.js";import{O as j,p as l,Q as h,V as y,Z as f,v,f as u,W as N,Y as b}from"./vendor-ui-Bq2TQ6SB.js";function M({task:s,date:a}){const{toggleTask:r,openTaskModal:o,deleteTask:c}=g(),i=s.dueDate&&!s.isCompleted&&j(l(s.dueDate))&&!h(l(s.dueDate)),n=s.dueDate&&h(l(s.dueDate)),d=s.subtasks.filter(t=>t.isCompleted).length,m=s.subtasks.length,x=m>0?d/m*100:0;return e.jsxs(p.div,{className:`task-card ${s.isCompleted?"completed":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100,height:0,marginBottom:0},transition:{duration:.2},layout:!0,children:[e.jsx("div",{className:`task-card-priority ${s.priority}`}),e.jsxs("div",{className:"task-card-content",children:[e.jsx(p.button,{className:`task-checkbox ${s.isCompleted?"checked":""}`,onClick:t=>{t.stopPropagation(),r(s.id,a)},whileTap:{scale:.8},whileHover:{scale:1.1},transition:{type:"spring",stiffness:400},children:s.isCompleted&&e.jsx(y,{size:14,strokeWidth:3})}),e.jsxs("div",{className:"task-info",onClick:()=>o(s),children:[e.jsx("div",{className:"task-title",children:s.title}),s.description&&e.jsx("div",{className:"task-description",children:s.description}),m>0&&e.jsxs("div",{className:"subtask-progress",children:[e.jsx("div",{className:"subtask-bar",children:e.jsx("div",{className:"subtask-bar-fill",style:{width:`${x}%`}})}),e.jsxs("span",{className:"subtask-label",children:[d,"/",m]})]}),e.jsxs("div",{className:"task-meta",children:[e.jsx("span",{className:"task-tag horizon",children:s.horizon}),e.jsx("span",{className:`task-tag energy-${s.energyLevel}`,children:s.energyLevel==="low"?"ðŸ”‹":s.energyLevel==="medium"?"âš¡":"ðŸ”¥"}),e.jsxs("span",{className:"task-tag xp",children:[e.jsx(f,{size:10,style:{marginRight:2}}),s.xpValue]}),s.estimatedMinutes>0&&e.jsxs("span",{className:"task-tag",children:[e.jsx(v,{size:10,style:{marginRight:3}}),s.estimatedMinutes,"m"]}),s.dueDate&&e.jsx("span",{className:`task-due ${i?"overdue":""} ${s.isRolledOver?"rollover":""}`,children:s.isRolledOver?"âš ï¸ Pending":n?"ðŸ“Œ Today":i?`âš ï¸ ${u(l(s.dueDate),"MMM d")}`:`ðŸ“… ${u(l(s.dueDate),"MMM d")}`})]})]}),e.jsxs("div",{className:"task-actions",children:[e.jsx("button",{className:"task-action-btn",onClick:t=>{t.stopPropagation(),o(s)},children:e.jsx(N,{size:14})}),e.jsx("button",{className:"task-action-btn delete",onClick:t=>{t.stopPropagation(),c(s.id)},children:e.jsx(b,{size:14})})]})]})]})}function P({progress:s,size:a=120,strokeWidth:r=8,label:o,color:c="#6c5ce7"}){const i=(a-r)/2,n=i*2*Math.PI,d=n-s/100*n;return e.jsxs("div",{className:"progress-ring-container",style:{position:"relative",width:a,height:a},children:[e.jsxs("svg",{width:a,height:a,style:{transform:"rotate(-90deg)",display:"block"},children:[e.jsx("circle",{cx:a/2,cy:a/2,r:i,fill:"none",stroke:"rgba(255,255,255,0.06)",strokeWidth:r}),e.jsx(p.circle,{cx:a/2,cy:a/2,r:i,fill:"none",stroke:c,strokeWidth:r,strokeLinecap:"round",strokeDasharray:n,initial:{strokeDashoffset:n},animate:{strokeDashoffset:d},transition:{duration:1.2,ease:"easeOut"},style:{filter:`drop-shadow(0 0 6px ${c}40)`}})]}),e.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsxs("span",{className:"progress-ring-value",style:{fontSize:Math.round(a*.22),fontWeight:700,color:"var(--text-primary)"},children:[s,"%"]}),o&&e.jsx("span",{className:"progress-ring-label",children:o})]})]})}export{P,M as T};
