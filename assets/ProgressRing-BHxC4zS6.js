import{c as x,t as j,u as y,s as r,v as h,j as s,m as p,Z as f,x as v,f as u}from"./index-SgyLPKfI.js";import{T as N}from"./trash-2-COGSar9e.js";const b=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],k=x("check",b);const D=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],C=x("pen-line",D);function M(e){return+j(e)<Date.now()}function P({task:e,index:a=0}){const{toggleTask:o,openTaskModal:l,deleteTask:c}=y(),i=e.dueDate&&!e.isCompleted&&M(r(e.dueDate))&&!h(r(e.dueDate)),n=e.dueDate&&h(r(e.dueDate)),d=e.subtasks.filter(t=>t.isCompleted).length,m=e.subtasks.length,g=m>0?d/m*100:0;return s.jsxs(p.div,{className:`task-card ${e.isCompleted?"completed":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100,height:0,marginBottom:0},transition:{delay:a*.04,duration:.25},layout:!0,children:[s.jsx("div",{className:`task-card-priority ${e.priority}`}),s.jsxs("div",{className:"task-card-content",children:[s.jsx(p.button,{className:`task-checkbox ${e.isCompleted?"checked":""}`,onClick:t=>{t.stopPropagation(),o(e.id)},whileTap:{scale:.8},whileHover:{scale:1.1},transition:{type:"spring",stiffness:400},children:e.isCompleted&&s.jsx(k,{size:14,strokeWidth:3})}),s.jsxs("div",{className:"task-info",onClick:()=>l(e),children:[s.jsx("div",{className:"task-title",children:e.title}),e.description&&s.jsx("div",{className:"task-description",children:e.description}),m>0&&s.jsxs("div",{className:"subtask-progress",children:[s.jsx("div",{className:"subtask-bar",children:s.jsx("div",{className:"subtask-bar-fill",style:{width:`${g}%`}})}),s.jsxs("span",{className:"subtask-label",children:[d,"/",m]})]}),s.jsxs("div",{className:"task-meta",children:[s.jsx("span",{className:"task-tag horizon",children:e.horizon}),s.jsx("span",{className:`task-tag energy-${e.energyLevel}`,children:e.energyLevel==="low"?"ðŸ”‹":e.energyLevel==="medium"?"âš¡":"ðŸ”¥"}),s.jsxs("span",{className:"task-tag xp",children:[s.jsx(f,{size:10,style:{marginRight:2}}),e.xpValue]}),e.estimatedMinutes>0&&s.jsxs("span",{className:"task-tag",children:[s.jsx(v,{size:10,style:{marginRight:3}}),e.estimatedMinutes,"m"]}),e.dueDate&&s.jsx("span",{className:`task-due ${i?"overdue":""} ${e.isRolledOver?"rollover":""}`,children:e.isRolledOver?"âš ï¸ Pending":n?"ðŸ“Œ Today":i?`âš ï¸ ${u(r(e.dueDate),"MMM d")}`:`ðŸ“… ${u(r(e.dueDate),"MMM d")}`})]})]}),s.jsxs("div",{className:"task-actions",children:[s.jsx("button",{className:"task-action-btn",onClick:t=>{t.stopPropagation(),l(e)},children:s.jsx(C,{size:14})}),s.jsx("button",{className:"task-action-btn delete",onClick:t=>{t.stopPropagation(),c(e.id)},children:s.jsx(N,{size:14})})]})]})]})}function w({progress:e,size:a=120,strokeWidth:o=8,label:l,color:c="#6c5ce7"}){const i=(a-o)/2,n=i*2*Math.PI,d=n-e/100*n;return s.jsxs("div",{className:"progress-ring-container",style:{position:"relative",width:a,height:a},children:[s.jsxs("svg",{width:a,height:a,style:{transform:"rotate(-90deg)",display:"block"},children:[s.jsx("circle",{cx:a/2,cy:a/2,r:i,fill:"none",stroke:"rgba(255,255,255,0.06)",strokeWidth:o}),s.jsx(p.circle,{cx:a/2,cy:a/2,r:i,fill:"none",stroke:c,strokeWidth:o,strokeLinecap:"round",strokeDasharray:n,initial:{strokeDashoffset:n},animate:{strokeDashoffset:d},transition:{duration:1.2,ease:"easeOut"},style:{filter:`drop-shadow(0 0 6px ${c}40)`}})]}),s.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[s.jsxs("span",{className:"progress-ring-value",children:[e,"%"]}),l&&s.jsx("span",{className:"progress-ring-label",children:l})]})]})}export{w as P,P as T};
