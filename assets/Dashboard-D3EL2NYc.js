import{j as e,m as t}from"./vendor-react-dE8-2NoN.js";import{u as h,I as B,Z as v,T as $,r as b}from"./vendor-ui-Bq2TQ6SB.js";import{u as k,g as Y,W as O,D as X,S as G,p as N,P as H}from"./index-CEuaEbzT.js";import{T as R,P as E}from"./ProgressRing-BZN9SLZr.js";import{R as q,A as K,X as U,Y as V,T as Z,a as J}from"./vendor-charts-B_b_m-Bk.js";import"./vendor-firebase-25KR_2Xm.js";function C(a,d=1200){const[u,p]=b.useState(0),m=b.useRef(0);return b.useEffect(()=>{const l=m.current;if(m.current=a,l===a){p(a);return}const j=Date.now(),r=()=>{const y=Date.now()-j,g=Math.min(y/d,1),n=1-Math.pow(1-g,3);p(Math.round(l+(a-l)*n)),g<1&&requestAnimationFrame(r)};requestAnimationFrame(r)},[a,d]),u}function te(){const{profile:a,getTodaysTasks:d,getCompletionRate:u,getWeeklyCompletionData:p,getTodaysFocus:m,openTaskModal:l,getProductivityScore:j,setView:r,setPendingAssistantMessage:y,getStagnantTasks:g}=k(),n=d(),T=g(),o=T.length>0?T.sort((s,c)=>(c.daysPending||0)-(s.daysPending||0))[0]:null,S=n.filter(s=>s.isCompleted).length,f=n.length,x=n.filter(s=>s.isRolledOver&&!s.isCompleted),w=n.filter(s=>!x.includes(s)),i=m(),A=p(),W=u("daily"),z=j(),P=C(a.totalTasksCompleted),D=C(a.currentStreak),I=C(a.level),L=s=>s>=80?"great":s>=60?"good":s>=40?"okay":"low",F=[{label:"Tasks Today",value:`${S}/${f}`,icon:"ðŸ“‹",color:"purple"},{label:"Current Streak",value:`${D} days`,icon:"ðŸ”¥",color:"orange"},{label:"Level",value:I,icon:"â­",color:"teal"},{label:"Total Completed",value:P,icon:"ðŸ†",color:"pink"}];return e.jsxs("div",{className:"page-content",style:{position:"relative"},children:[e.jsx("div",{style:{marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",gap:16},children:e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:28,fontWeight:700,margin:0,background:"linear-gradient(to right, #fff, #a5a5a5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:(()=>{const s=k.getState().user?.displayName||(a.name!=="User"?a.name:"")||"Attacker",{text:c,type:M}=Y(s);return e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{WebkitTextFillColor:"initial",marginRight:12,display:"inline-flex",alignItems:"center",verticalAlign:"middle"},children:e.jsx(O,{type:M,size:32})}),c]})})()}),e.jsx("div",{style:{fontSize:14,color:"var(--text-tertiary)",marginTop:4},children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]})}),e.jsx(X,{}),e.jsx(G,{}),i?e.jsxs(t.div,{className:"focus-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"focus-card-label",children:[e.jsx(h,{size:14})," Today's Focus"]}),e.jsx("div",{className:"focus-card-title",children:i.title}),i.description&&e.jsx("div",{className:"focus-card-desc",children:i.description}),e.jsxs("div",{className:"focus-card-meta",children:[e.jsx("span",{className:"task-tag horizon",children:i.horizon}),e.jsxs("span",{className:`task-tag energy-${i.energyLevel}`,children:[i.energyLevel==="low"?"ðŸ”‹":i.energyLevel==="medium"?"âš¡":"ðŸ”¥"," ",i.energyLevel]}),e.jsxs("span",{className:"task-tag xp",children:["+",i.xpValue," XP"]})]}),e.jsxs("div",{className:"focus-card-action",style:{display:"flex",gap:10},children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>k.getState().toggleTask(i.id),children:[e.jsx(B,{size:16,style:{marginRight:8}})," Complete Now"]}),e.jsxs("button",{className:"btn btn-secondary",style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-primary)",padding:"8px 16px",borderRadius:8,cursor:"pointer",display:"flex",alignItems:"center",gap:8},onClick:()=>{N("success"),y("Review my tasks and suggests a plan for today."),r("assistant")},children:[e.jsx(h,{size:16})," Plan My Day"]})]})]}):f>0?e.jsxs(t.div,{className:"focus-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"focus-card-label",children:[e.jsx(h,{size:14})," All Done!"]}),e.jsx("div",{className:"focus-card-title",children:"ðŸŽ‰ You've completed all tasks for today!"}),e.jsx("div",{className:"focus-card-desc",children:"Great work! Take a well-deserved break or plan ahead for tomorrow."})]}):e.jsxs(t.div,{className:"focus-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"focus-card-label",children:[e.jsx(h,{size:14})," Welcome to Attackers Arena"]}),e.jsx("div",{className:"focus-card-title",children:"Your mission begins now"}),e.jsx("div",{className:"focus-card-desc",children:"Add your first mission and unlock achievements, earn XP, and build unstoppable discipline."}),e.jsx("div",{className:"focus-card-action",style:{display:"flex",gap:10},children:e.jsxs("button",{className:"btn btn-primary",onClick:()=>l(),children:[e.jsx(v,{size:16,style:{marginRight:8}})," Add Your First Task"]})})]}),o&&e.jsxs(t.div,{className:"insight-alert",initial:{opacity:0,y:15},animate:{opacity:1,y:0},style:{marginBottom:24,padding:16,background:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",borderRadius:16,display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{padding:8,background:"rgba(255, 107, 107, 0.2)",borderRadius:12,color:"var(--accent-danger)"},children:e.jsx($,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,color:"var(--accent-danger)",fontSize:13,marginBottom:2},children:"COACH INSIGHT"}),e.jsxs("div",{style:{fontSize:14},children:['"',o.title,'" has been stuck for ',e.jsxs("span",{style:{fontWeight:700},children:[o.daysPending," days"]}),"."]})]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"btn-sm",style:{background:"rgba(255,255,255,0.1)",color:"white",padding:"8px 14px",borderRadius:8,fontSize:13,border:"none",cursor:"pointer",fontWeight:500},onClick:()=>{N("click"),y(`Help me break down the task "${o.title}" into smaller steps.`),r("assistant")},children:"Break It Down"}),e.jsx("button",{className:"btn-sm",style:{background:"transparent",color:"var(--text-tertiary)",padding:"8px 14px",borderRadius:8,fontSize:13,border:"1px solid var(--border-subtle)",cursor:"pointer"},onClick:()=>{N("click"),l(o)},children:"Reschedule"})]})]}),x.length>0&&e.jsxs(t.div,{className:"pending-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{marginBottom:24,padding:16,background:"rgba(255, 171, 0, 0.1)",border:"1px solid rgba(255, 171, 0, 0.3)",borderRadius:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12,color:"#ffab00",fontWeight:600},children:[e.jsx(v,{size:18})," Yesterday's Pending (",x.length,")"]}),e.jsx("div",{className:"task-list",children:x.map(s=>e.jsx(R,{task:s},s.id))})]}),e.jsx("div",{className:"dashboard-grid",children:F.map((s,c)=>e.jsxs(t.div,{className:`stat-card ${s.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.08},whileHover:{y:-3},children:[e.jsx("div",{className:"stat-card-icon",children:s.icon}),e.jsx("div",{className:"stat-card-value",children:s.value}),e.jsx("div",{className:"stat-card-label",children:s.label})]},s.label))}),e.jsxs("div",{className:"charts-grid",children:[e.jsxs(t.div,{className:"chart-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("div",{className:"chart-title",children:"Weekly Activity"}),e.jsx(q,{width:"100%",height:200,children:e.jsxs(K,{data:A,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorCompleted",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#7c6cf0",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#7c6cf0",stopOpacity:0})]})}),e.jsx(U,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fill:"#5e5e80",fontSize:12}}),e.jsx(V,{axisLine:!1,tickLine:!1,tick:{fill:"#5e5e80",fontSize:12}}),e.jsx(Z,{contentStyle:{background:"rgba(14,14,26,0.95)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:10,color:"#f0f0f8",backdropFilter:"blur(12px)"},itemStyle:{color:"#f0f0f8"},cursor:{stroke:"rgba(255,255,255,0.1)",strokeWidth:1}}),e.jsx(J,{type:"monotone",dataKey:"completed",stroke:"#7c6cf0",fill:"url(#colorCompleted)",strokeWidth:2.5})]})})]}),e.jsxs(t.div,{className:"chart-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:16,textAlign:"center"},children:[e.jsx("div",{className:"chart-title",children:"Daily Progress"}),e.jsx(E,{progress:W,size:120,label:"Complete"}),e.jsxs("div",{className:"productivity-score",children:[e.jsx(v,{size:16,style:{color:"var(--accent-warning)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"productivity-label",children:"Productivity"}),e.jsxs("div",{className:`productivity-value ${L(z)}`,children:[z,"%"]})]})]})]})]}),a.dailyChallenge&&e.jsxs(t.div,{className:"challenge-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{marginBottom:32},children:[e.jsx("div",{className:"challenge-label",children:"âš¡ Daily Challenge"}),e.jsx("div",{className:"challenge-title",children:a.dailyChallenge.title}),e.jsx("div",{className:"challenge-desc",children:a.dailyChallenge.description}),e.jsxs("div",{className:"challenge-progress",children:[e.jsx("div",{className:"challenge-bar",children:e.jsx(t.div,{className:"challenge-fill",initial:{width:0},animate:{width:`${Math.min(100,a.dailyChallenge.progress/a.dailyChallenge.target*100)}%`},transition:{duration:.8,ease:"easeOut"}})}),e.jsxs("span",{className:"challenge-xp",children:[a.dailyChallenge.progress,"/",a.dailyChallenge.target," â€¢ +",a.dailyChallenge.xpReward," XP",a.dailyChallenge.isCompleted&&" âœ…"]})]})]}),w.length>0&&e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"task-list-header",children:[e.jsx("h3",{className:"task-list-title",children:"Today's Tasks"}),e.jsxs("span",{className:"task-list-count",children:[S,"/",f," done"]})]}),e.jsx("div",{className:"task-list",children:w.slice(0,5).map(s=>e.jsx(R,{task:s},s.id))})]}),e.jsx(H,{})]})}export{te as default};
